<template>
  <section class="section index-works">
    <div class="container">
      <div class="index-works__wrapper">
        <div class="index-works__slider">
          <!-- <div class="index-works__slider-item">
            <div class="index-works__slider-item__image">
              <img src="~/assets/work-trowas.jpg" alt="" />
            </div>
            <div class="index-works__slider-item__content"></div>
          </div> -->
          <div id="home-work">
            <div
              class="work-carousel animResize tc"
              data-min="900"
              style=""
              data-height="1140"
            >
              <div
                id="mod-swiper"
                class="carousel-spinner"
                style="
                  transform: translate3d(0px, 0px, 0px) rotate(-26.8039deg);
                "
              >
                <div class="carousel-group">
                  <div class="thumb-wrap">
                    <div class="work-thumb">
                      <div class="index-works__slider-item">
                        <div class="index-works__slider-item__image">
                          <img src="~/assets/work-trowas.jpg" alt="" />
                        </div>
                        <div class="index-works__slider-item__content"></div>
                      </div>
                    </div>
                  </div>
                  <div class="thumb-wrap">
                    <div class="work-thumb">
                      <div class="index-works__slider-item">
                        <div class="index-works__slider-item__image">
                          <img src="~/assets/work-trowas.jpg" alt="" />
                        </div>
                        <div class="index-works__slider-item__content"></div>
                      </div>
                    </div>
                  </div>
                  <div class="thumb-wrap">
                    <div class="work-thumb">
                      <div class="index-works__slider-item">
                        <div class="index-works__slider-item__image">
                          <img src="~/assets/work-trowas.jpg" alt="" />
                        </div>
                        <div class="index-works__slider-item__content"></div>
                      </div>
                    </div>
                  </div>
                  <div class="thumb-wrap">
                    <div class="work-thumb">
                      <div class="index-works__slider-item">
                        <div class="index-works__slider-item__image">
                          <img src="~/assets/work-trowas.jpg" alt="" />
                        </div>
                        <div class="index-works__slider-item__content"></div>
                      </div>
                    </div>
                  </div>
                  <div class="thumb-wrap">
                    <div class="work-thumb">
                      <div class="index-works__slider-item">
                        <div class="index-works__slider-item__image">
                          <img src="~/assets/work-trowas.jpg" alt="" />
                        </div>
                        <div class="index-works__slider-item__content"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="carousel-group loop"
                  style="transform: rotate(52deg)"
                >
                  <div
                    class="thumb-wrap"
                    style="transform: translate(0px, 0px)"
                  >
                    <div class="work-thumb">
                      <div class="frame">
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <img
                        src="https://www.griflan.com/wp-content/uploads/2022/10/Artboard-2.jpg"
                      />
                      <p>SHOPX</p>
                      <a
                        href="https://www.griflan.com/work/shopx/"
                        data-link="internal"
                      ></a>
                    </div>
                  </div>
                  <div class="thumb-wrap" style="transform: rotate(13deg)">
                    <div class="work-thumb">
                      <div class="frame">
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <img
                        src="https://www.griflan.com/wp-content/uploads/2022/05/Shift_Thumb_New2.jpg"
                      />
                      <p>Shift Paradigm</p>
                      <a
                        href="https://www.griflan.com/work/shift-paradigm/"
                        data-link="internal"
                      ></a>
                    </div>
                  </div>
                  <div class="thumb-wrap" style="transform: rotate(26deg)">
                    <div class="work-thumb">
                      <div class="frame">
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <img
                        src="https://www.griflan.com/wp-content/uploads/2022/10/nesting-thumb.jpg"
                      />
                      <p>Nesting</p>
                      <a
                        href="https://www.griflan.com/work/nesting/"
                        data-link="internal"
                      ></a>
                    </div>
                  </div>
                  <div class="thumb-wrap" style="transform: rotate(39deg)">
                    <div class="work-thumb">
                      <div class="frame">
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <img
                        src="https://www.griflan.com/wp-content/uploads/2022/04/thumb-armadillo@2x.png"
                      />
                      <p>Armadillo</p>
                      <a
                        href="https://www.griflan.com/work/armadillo/"
                        data-link="internal"
                      ></a>
                    </div>
                  </div>
                  <div class="thumb-wrap" style="transform: rotate(52deg)">
                    <div class="work-thumb">
                      <div class="frame">
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <img
                        src="https://www.griflan.com/wp-content/uploads/2022/04/thumb-happyface@2x.jpg"
                      />
                      <p>Happyface</p>
                      <a
                        href="https://www.griflan.com/work/happyface/"
                        data-link="internal"
                      ></a>
                    </div>
                  </div>
                  <div class="thumb-wrap" style="transform: rotate(65deg)">
                    <div class="work-thumb">
                      <div class="frame">
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                        <div>
                          <div>
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 427 648"
                              preserveAspectRatio="none"
                            >
                              <path
                                d="M0,0,419.91966,4.2279l6.26559,642.54252L6.26558,642.54247Z"
                              ></path>
                            </svg>
                          </div>
                        </div>
                      </div>
                      <img
                        src="https://www.griflan.com/wp-content/uploads/2022/04/thumb-stp@2x.png"
                      />
                      <p>STP</p>
                      <a
                        href="https://www.griflan.com/work/strategic-technology-partners/"
                        data-link="internal"
                      ></a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script>
export default {
  components: {},
  mounted() {
    var carouselOn = true;
    var carousel_tl;
    var startRot;
    var cTot;
    var cSpeed;
    var rotLoop;

    var cRot = 13;
    var startRot = -26;
    var cTot = $(".carousel-spinner").find(".work-thumb").length;
    var cSpeed = 25;
    var rotLoop = -cTot * cRot;
    // set position of thumbs around carousel

    $("#home-work")
      .find(".thumb-wrap")
      .each(function (i) {
        gsap.set($(this), { rotation: cRot * i });
      });

    // duplicate carousel for looping

    $(".carousel-group").clone().addClass("loop").appendTo(".carousel-spinner");
    gsap.set($(".carousel-group.loop"), { rotation: startRot + cRot * cTot });

    // carousel mover

    carouselOn = true;
    carousel_tl = gsap.timeline({ repeat: -1 }).to($(".carousel-spinner"), {
      duration: 50,
      rotation: rotLoop,
      ease: "none",
    });

    // carousel control

    $(".work-thumb").mouseenter(function () {
      if (carouselOn) {
      }
    });

    $(".work-thumb").mouseleave(function () {
      if (carouselOn) {
      }
    });
    if ($(".carousel-group").length < 5) {
      for (let i = 0; i < 3; i++) {
        let n = 2 + i;
        $(".carousel-group:first-child")
          .clone()
          .addClass("loop" + n)
          .appendTo(".carousel-spinner");
        gsap.set($(".carousel-group.loop" + n), {
          rotation: startRot + cRot * cTot * n,
        });
      }
    }
  },
  methods: {},
};
</script>

<style>
#home-work {
  padding-left: 0px;
  padding-right: 0px;
  padding-top: 600px;
  padding-bottom: 104px;
  position: relative;
  height: 114rem;
  width: 100%;
}
#home-work h2.line-split {
  position: relative;
  width: 1140px;
  /* height: 690px; */
  left: 50%;
  margin-left: -570px;
  text-align: center;
  margin-top: 127px;
}
#home-work .eyes {
  position: absolute;
  right: 96px;
  top: 0px;
  width: 79px;
}
#home-work .btn-wrap {
  margin-top: 92px;
  text-align: center;
  pointer-events: none;
}
#home-work .btn-wrap a {
  pointer-events: all;
}
#home-work .work-carousel {
  width: 100vw;
  height: 1140px;
  overflow: hidden;
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}
#home-work .work-carousel .base {
  width: 100%;
  max-width: 2448px;
  margin: 0 auto;
  margin-top: 25px;
  visibility: hidden;
}
#home-work .work-carousel .carousel-spinner {
  width: 3600px;
  height: 3600px;
  border-radius: 50%;
  position: absolute;
  top: 603px;
  left: 50%;
  margin-left: -1800px;
  will-change: transform;
}
#home-work .carousel-group {
  width: 100%;
  height: 100%;
  position: absolute;
  left: 0;
  top: 0;
  transform: rotate(-26deg);
  pointer-events: none;
}
#home-work .thumb-wrap {
  width: 100%;
  height: 100%;
  position: absolute;
  left: 0;
  top: 0;
  pointer-events: none;
}
#home-work .work-thumb {
  position: absolute;
  left: 0;
  top: 0;
  width: 376px;
  top: -568px;
  left: 50%;
  margin-left: -188px;
  pointer-events: all;
}
#home-work .work-thumb p {
  color: #ff4444;
  opacity: 0;
}
</style>
